## 200421 개발 3주차 자료
#### 3 주차 목표 : 1:N Model 연결/ 여러 app 연결/ 코드의 재사용 / Git
- 1 여러개의 app의 url 관리하기 위해 include
- 2 Model의 1:N 관계(foreing key) PK(Primory key)기본 의   이해
- 3 코드의 재사용
- 3 form으로 사용자 입력받고 DB에 저장하기

### 간단한 아주대 멋사8기 블로그를 만들어 볼게용
미적 감각이 없어서 CSS는 대충 해쓰요<br/>

### 1) 첫 페이지
![1](https://user-images.githubusercontent.com/48672212/79045788-dbc71100-7c47-11ea-9bbf-ed2a2915eb0c.JPG)
<br/>
#### 해당코드
![1](https://user-images.githubusercontent.com/48672212/79046874-4bd89580-7c4e-11ea-88ab-eb90b672e800.JPG)
#### 여기서 아기사자 리스트를 들어가보면
![2](https://user-images.githubusercontent.com/48672212/79045810-0913bf00-7c48-11ea-847f-2a4962f9d3eb.png)
### 2) 아주대 멋사 8기 팀원 리스트 보여주는 페이지
#### 보시면 url뒤에 /lions가 붙은 걸 확인할 수 있어요
![3](https://user-images.githubusercontent.com/48672212/79045851-5b54e000-7c48-11ea-9f7a-478a4d44bfe1.JPG)
<br/>
#### 사진을 보면 코딩을 엄청 많이 했을 것 같은데 실제론 그렇지 않습니다
![4](https://user-images.githubusercontent.com/48672212/79045881-87706100-7c48-11ea-97fd-676e950ab663.JPG)<br/>
#### 그리고 팀원 페이지를 들어가보면
![5](https://user-images.githubusercontent.com/48672212/79045905-acfd6a80-7c48-11ea-9425-00fddf32fbff.png)
### 3) 팀원 각자가 쓴 POST 페이지
#### 여기도 보시면 url 뒤에 /lion/1 이 붙은걸 확인 할 수 있죠?
![15](https://user-images.githubusercontent.com/48672212/79045935-cef6ed00-7c48-11ea-932d-7fbb7f2c5be8.JPG)
#### 이 페이지 코드
![7](https://user-images.githubusercontent.com/48672212/79045980-fcdc3180-7c48-11ea-8842-f199d3cf2908.JPG)
### 4) 전체 팀원이 쓴 POST 페이지
#### 첫 페이지에서 저기로 들어가보면~
![8](https://user-images.githubusercontent.com/48672212/79046000-18473c80-7c49-11ea-90e6-dce7c06a7344.png)
<br/>
#### 역시 url 뒤가 바뀐걸 알 수 있죠
![10](https://user-images.githubusercontent.com/48672212/79046017-33b24780-7c49-11ea-93c8-b2025e2989f2.JPG)
#### 해당 페이지 코드는 다음과 같습니다
![12](https://user-images.githubusercontent.com/48672212/79046034-43ca2700-7c49-11ea-81da-cc0c506b0a2c.JPG)


## 상세과정
2주차에 model을 migrate해서 DB를 만들어주고 Data를 생성한 후 view로 처리해준 뒤 html로 보내봤죠?<br/>
app을 하나 더 만들어주고 model을 만들어 준 뒤 기존의 모델과 연결시키고, 앱의 url을 프로젝트에 연결해볼게요<br/>

#### 1 앱 만들기
```
/project 위치

python manage.py startapp post
```
#### 2 settings.py에 앱 등록해주기
```python

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'myapp',
    'post',
]
```
#### 3 post앱에 urls.py 만들기
```python
from django.urls import path
import post.views

urlpatterns = [
    path('', post.views.post_list, name = 'post_list'), 
    #''(공백) url이 들어오면 post_list 함수를 호출한다
]
```
#### 4 myproject urls에서 post/urls.py 연결해주기
```python
from django.contrib import admin
from django.urls import path, include   # include import 해주기
import myapp.views

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', myapp.views.index, name = 'home'),
    path('lions/', myapp.views.lion_list, name = 'lions'),
    path('post/', include('post.urls')) 
    # post.urls를 include 해주는데 처음 url이 `post/` 가 된다   
]
```
나중엔 기능별로 앱이 생길텐데 project/urls.py에 모든 path를 관리하면 보기 안좋겠죠?<br/>
그래서 보통 app에다가 urls.py 를 만들어 주고 project/urls.py와 연결해줍니다<br/>
#### 5 이제 post/views.py에 함수를 작성하고 templates/post.html을 만들어줄게요
![캡처](https://user-images.githubusercontent.com/48672212/79643223-f0258380-81dc-11ea-8519-f1c536d99dc3.JPG)
<br/>
```python
# post/views.py
from django.shortcuts import render

def post_list(request):

    return render(request, 'post.html')
```
```html
<!-- templates/post.html --!>

<h2>하위</h2>
```
그리고 runserver를 돌려서 url 뒤에 /post를 쳐주면`하위가 나오죠?`<br/>
post/urls.py와 myproject/urls.py에서 처리해준것 같이 post.html을 요청해줍니다<br/>
이제 post 앱에도 model을 만들고 makemigrations -> migrate 해서 DB를 만들어줄게요 <br/>
```python
# post/models.py

from django.db import models
from django.utils import timezone

# Create your models here.

class Post(models.Model):
    title = models.CharField(max_length = 100)      # 제목
    content = models.TextField(max_length = 200)    # 내용
    create_data = models.DateTimeField(default = timezone.now)
    objects = models.Manager()  # 저번시간에 말해준 Manager인데 다시한번 집고 넘어가
    
    def __str__(self):    # 얘는 데이터 생성 시 생성값을 title 칼럼으로 해준다는 것
        return str(self.title)
```
`python manage.py makemigrations`랑`python manage.py migrate`ㄱㄱ<br/><br/>
아 근데 해주고 싶은게 있어요<br/>
저번에 Lion 모델에서 생성한 객체들이 이 Post 모델을 이용해서 글을 작성하게 하고 싶어요<br/>
보통 한 사람이 여러개의 글을 작성하죠 ? <br/>
그러려면 Lion 모델과 Post 모델을 1 : N으로 묶어주면 됩니다 <br/><br/>
`뭔소리야?`<br/>

