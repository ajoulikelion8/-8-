
### 간단한 아주대 멋사8기 블로그를 만들어 볼게용
미적 감각이 없어서 CSS는 대충 해쓰요<br/>

#### 알아야 할 것
- 1 ) Django의 Model을 이용해 DB를 만들고 ADMIN 페이지에서 데이터를 관리해준다
- 2 ) Django의 Templates Tag를 사용하여 HTML에서 변수, 논리처리(for, if) 해주기 
- 3 ) 여러개의 app의 url 관리하기 위해 include 
- 4 ) Model의 1:N 관계를 (foreing key) 이해
- 5 ) model에서 쿼리셋 view로 가져와서 templates으로 변수 넘겨주는 과정 이해

#### 더 알아야 할 것
- 1 ) 코드의 재사용
### 1) 첫 페이지
![1](https://user-images.githubusercontent.com/48672212/79045788-dbc71100-7c47-11ea-9bbf-ed2a2915eb0c.JPG)
<br/>
#### 해당코드
![1](https://user-images.githubusercontent.com/48672212/79046874-4bd89580-7c4e-11ea-88ab-eb90b672e800.JPG)
#### 여기서 아기사자 리스트를 들어가보면
![2](https://user-images.githubusercontent.com/48672212/79045810-0913bf00-7c48-11ea-847f-2a4962f9d3eb.png)
### 2) 아주대 멋사 8기 팀원 리스트 보여주는 페이지
#### 보시면 url뒤에 /lions가 붙은 걸 확인할 수 있어요
![3](https://user-images.githubusercontent.com/48672212/79045851-5b54e000-7c48-11ea-9f7a-478a4d44bfe1.JPG)
<br/>
#### 사진을 보면 코딩을 엄청 많이 했을 것 같은데 실제론 그렇지 않습니다
![4](https://user-images.githubusercontent.com/48672212/79045881-87706100-7c48-11ea-97fd-676e950ab663.JPG)<br/>
#### 그리고 팀원 페이지를 들어가보면
![5](https://user-images.githubusercontent.com/48672212/79045905-acfd6a80-7c48-11ea-9425-00fddf32fbff.png)
### 3) 팀원 각자가 쓴 POST 페이지
#### 여기도 보시면 url 뒤에 /lion/1 이 붙은걸 확인 할 수 있죠?
![15](https://user-images.githubusercontent.com/48672212/79045935-cef6ed00-7c48-11ea-932d-7fbb7f2c5be8.JPG)
#### 이 페이지 코드
![7](https://user-images.githubusercontent.com/48672212/79045980-fcdc3180-7c48-11ea-8842-f199d3cf2908.JPG)
### 4) 전체 팀원이 쓴 POST 페이지
#### 첫 페이지에서 저기로 들어가보면~
![8](https://user-images.githubusercontent.com/48672212/79046000-18473c80-7c49-11ea-90e6-dce7c06a7344.png)
<br/>
#### 역시 url 뒤가 바뀐걸 알 수 있죠
![10](https://user-images.githubusercontent.com/48672212/79046017-33b24780-7c49-11ea-93c8-b2025e2989f2.JPG)
#### 해당 페이지 코드는 다음과 같습니다
![12](https://user-images.githubusercontent.com/48672212/79046034-43ca2700-7c49-11ea-81da-cc0c506b0a2c.JPG)


## 상세과정
### 1) hello world 먼저 띄우기
- 가상환경 설치 `python -m venv myvenv`
- 가상환경 구동 `source myvenv/Scripts/Activate`
- Django 설치 `pip install django`
- Project 만들기 `django-admin startproject myproject`
- Project 폴더로 가기 `cd myproject`
- app 만들기 `python manage.py startapp myapp`
- myproject/settings.py에 앱 등록하기
```python
# myproject/settings.py

# Application definition

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'myapp',
]
```
- myapp/views.py 에 함수 
```python
# myapp/views.py

def index(request): # request가 들어온걸
    return render(request, 'index.html') # index.html을 render해준다
```
- myapp/templates 폴더 만들고 index.html 파일 만들기
- myproject/urls.py 에 path 설정
```python
# myproject/urls.py

from django.contrib import admin
from django.urls import path
import myapp.views

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', myapp.views.index, name = 'home'),
    # 공백 url이 request되면 myapp.views에 있는 index 함수를 호출해라
]
```
#### 이제 manage.py 가 있는 폴더 위치에서 runserver하면 hello world가 되죠?

### 2) 모델작성과 migrate으로 DB생성 및 admin site 등록
```python
# myapp/models.py

from django.db import models
from django.utils import timezone

class Lion(models.Model):
# models.Model을 상속받아서 다음과같이 해주면 ORM으로 DB만들어 줌

    name = models.CharField(max_length = 100)  # 이름
    age = models.IntegerField() # 나이
    create_data = models.DateTimeField(default = timezone.now) # 생성날짜

    def __str__(self):
        return str(self.name)
```
근데 이렇게 써준다고 해서 DB가 만들어지지 않아요. Django 한테 나 model 만들었어요!<br/>
라고 말을 해줘야 이 작성된 클래스를 가지고 DB를 만들어 줍니다<br/>
먼저 내가 등록할 것(migrations)을 생성하고 `python manage.py makemigrations`<br/>
다음에 내가 등록할 것(migrations)을 적용시켜줍니다 `python manage.py migrate`<br/>

![12312](https://user-images.githubusercontent.com/48672212/79061307-e2966800-7cc9-11ea-84b3-aa2dc5e0a49d.JPG)
<br/>
그럼 이렇게 될 거에요, 여러분은 DB를 만드신 겁니다.<br/>
![12421](https://user-images.githubusercontent.com/48672212/79062203-f5616a80-7cd2-11ea-9fb7-408cf4780ed9.JPG)
<br/>
이런 표는 많이들 보셨죠?<br/>
이렇게 관계형 데이터 형태인 row와 column 형태로 만들어 주는거에요
<br/>
그럼 확인해볼게요<br/>
<br/>
먼저 admin site에 나의 모델을 작성한 app을 등록시켜줘야해요
```python
# myapp/apps.py

from django.contrib import admin
from myapp.models import Lion //모델을 가져와서

admin.site.register(Lion) // admin site에 register 해준다
```
그러면 기존에 myproject/urls에 작성된 path를 통해 관리자 페이지로 이동가능합니다<br/>
runserver를 하고 url 뒤에 /admin 을 쳐주면 관리자 페이지가 나타납니다. 로그인 할 관리자가 필요하니 관리자부터 만들어 볼게요<br/>
콘솔창에서 admin 관리자인 SuperUser을 생성해서 데이터를 관리해볼게요<br/>
![123](https://user-images.githubusercontent.com/48672212/79061244-00170200-7cc9-11ea-946c-f6ad496b59f1.JPG)
<br/>
이제 로그인 해주면~<br/>
![12412](https://user-images.githubusercontent.com/48672212/79061400-eecef500-7cca-11ea-8a10-8a7e385508b4.JPG)
<br/>
이렇게 내가 model을 작성하고 migrate하고 admin사이트에 등록해준 Lion 모델이 나오죠?
<br/>
여길 들어가보면
<br/>
![agseg](https://user-images.githubusercontent.com/48672212/79061442-59803080-7ccb-11ea-9da6-4ab59da0cfe3.JPG)
<br/>
다음과 같이 내가 작성한 column인 name과 age를 작성해 줄 수 있어요/ 만들어주면<br/>
![saegsaegse](https://user-images.githubusercontent.com/48672212/79062259-81739200-7cd3-11ea-8aa4-6185e74d460c.JPG)
<br/>
다음과 같이 DB에 저장되고
<br/>
![asiegji](https://user-images.githubusercontent.com/48672212/79061477-a49a4380-7ccb-11ea-884f-5e2f3083ca8d.JPG)
<br/>
이렇게 우리 아기사자들을 만들어줄 수 있어요

### 3 ) 생성한 데이터를 Views.py에서 처리해주기
우리는 이제 무려 데이터를 만들었으니 이것들을 html파일에 표현해야죠?<br/>
생성한 데이터를 Views.py에서 처리해서 templates인 html로 보내야해요<br/>
```python
# myapp/views.py
from django.shortcuts import render
from myapp.models import Lion # 등록한 model인 Lion을 import 해주고

# lion에 등록한 이름들을 보여줄 html을 lions.html에 보여주기 위해 다음과 같이 해줍니다
def lion_list(request): 
    lion_list = Lion.objects.all()  # Lion모델에있는 objects(이름)를 all(모두) 가져와라

    return render(request, 'lions.html', {'lion_list' : lion_list})
    # lions.html에 render 해줄껀데 선언하고 할당해준 lion_list 변수를 html에 넘겨주기 위해
    # 다음과 같이 해줍니다
```
Views.py를 작성했으면 urls.py 에서 path 처리를 해줘야 겠죠?<br/>
```python
from django.contrib import admin
from django.urls import path
import myapp.views

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', myapp.views.index, name = 'home'),
    path('lions/', myapp.views.lion_list, name = 'lions'),
    # url에 'lions/'이 입력되면 myapp/views.py에 있는 lion_list 함수를 호출해준다
]
```
그러면 이제 html에서 lion_list 변수를 사용해 주면 됩니다<br/>

### 4) views.py 에서 처리한 데이터를 templates에 보내서 웹에 표현하기
views.py 에서 lions.html에 'lion_list' 변수를 넘겨 주라고 했죠?<br/>
이 넘겨준 변수를 사용하기 위해서는 Django 에서 제공하는 Templates Tag를 알아야 해요
<br/>
html은 프로그래밍 언어가 아니라 hyper text markup language라서<br/>
변수를 선언해주거나 if와 for같은 논리가 없어요<br/>
그래서 django에서 템플릿 테그에 python 논리를 담아서 html에서 사용할 수 있도록 만든겁니다<br/>

```html
<body>
    <div class = "header">
        <h1>여기에 아기사자들 가져와</h1>
    </div>
    <div>
        <a href = "{% url 'home' %}">뒤로가기</a>
    </div>
    <!-- views에서 넘겨준 lion_list를 for 처리 해준다 --!>
    {% for lion in lion_list %} 

        <div class = "lion">
            <!-- lion은 lion_list에서 하나의 객체를 가르켜요 --!>
            <h1>{{ lion.name }}</h1>
            <p>가입 날짜 : {{ lion.create_data }}</p>
        </div>

    {% endfor %}

</body>
```
아마 for문은 여러분이 더 잘 아실꺼에요 <br/>
`for item in array`는 array 배열에서 각 item을 처리해주라는 거죠?<br/>
그리고 각 아이템은 우리가 만들어준 모델의 칼럼들을 가지고 있죠. name, create_data, age <br/>
그것들을 적용시키기 위해서는 dot(.)이라는 메소드를 사용해주면 됩니다<br/>
